angular.module("simpleStorage",[]).factory("$local",function($rootScope,$window){var $localFactory={};var method=$window.localStorage;var pre="sS.expire.";$localFactory.set=function(k,v,expire){method&&method.setItem(k,checkObj(v));if(typeof expire!="undefined"){k=pre+k;method&&method.setItem(k,parseDate(expire))}return!!this.get(k)};$localFactory.get=function(k){if(method&&method.getItem(pre+k)){var expDate=(new Date(method&&method.getItem(pre+k))).getTime(),$now=(new Date).getTime();if(expDate<
$now){method&&method.removeItem(k);method&&method.removeItem(pre+k);return null}}return checkJson(method&&method.getItem(k))};$localFactory.remove=function(k){method&&method.removeItem(k)};$localFactory.clear=function(){method&&method.clear()};$localFactory.all=function(){var i=0,oJson={},sKey;for(;sKey=method.key(i);i++)oJson[sKey]=method.getItem(sKey);return oJson};return $localFactory}).factory("$session",function($rootScope,$window){var $sessionFactory={};var method=$window.sessionStorage;var pre=
"sS.expire.";$sessionFactory.set=function(k,v,expire){method&&method.setItem(k,checkObj(v));if(typeof expire!="undefined"){k=pre+k;method&&method.setItem(k,parseDate(expire))}return!!this.get(k)};$sessionFactory.get=function(k){if(method&&method.getItem(pre+k)){var expDate=(new Date(method&&method.getItem(pre+k))).getTime(),$now=(new Date).getTime();if(expDate<$now){method&&method.removeItem(k);method&&method.removeItem(pre+k);return null}}return checkJson(method&&method.getItem(k))};$sessionFactory.remove=
function(k){method&&method.removeItem(k)};$sessionFactory.clear=function(){method&&method.clear()};$sessionFactory.all=function(){var i=0,oJson={},sKey;for(;sKey=method.key(i);i++)oJson[sKey]=method.getItem(sKey);return oJson};return $sessionFactory}).factory("$flash",function($rootScope,$window){var $flashFactory={},pre="sS.flash.",method=$window.localStorage;$flashFactory.set=function(k,v){method&&method.setItem(pre+k,checkObj(v))};$flashFactory.get=function(k){var val=checkJson(method&&method.getItem(pre+
k));method&&method.removeItem(pre+k);return val};$flashFactory.remove=function(k){method&&method.removeItem(pre+k)};return $flashFactory});function checkObj(el){if(typeof el=="object")return angular.toJson(el);return el}function checkJson(el){var response;try{response=JSON.parse(el)}catch(e){response=el}return response}
function parseDate(dt){var dtX=dt.split(" "),lng=parseInt(dtX[0]),method=dtX.length>1?dtX[1]:null,$today=new Date;if(["year","years"].indexOf(method)>-1)$today.setDate($today.getDate()+lng);else if(["month","months"].indexOf(method)>-1)$today.setMonth($today.getMonth()+lng);else if(["day","days"].indexOf(method)>-1)$today.setDate($today.getDate()+lng);else if(["hour","hours"].indexOf(method)>-1)$today.setHours($today.getHours()+lng);else if(["minute","minutes"].indexOf(method)>-1)$today.setMinutes($today.getMinutes()+
lng);else if(["second","seconds"].indexOf(method)>-1)$today.setSeconds($today.getSeconds()+lng);else $today.setMilliseconds($today.getMilliseconds()+lng);return $today};
